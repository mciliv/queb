runtime: nodejs20
service: default

env_variables:
  NODE_ENV: production
  GOOGLE_CLOUD_PROJECT: mol-analysis-app
  OPENAI_API_KEY: ${OPENAI_API_KEY}

# Use Google Secret Manager for sensitive data
includes:
- env_variables:
    OPENAI_API_KEY:
      _secret: openai-api-key

handlers:
- url: /.*
  script: auto
  secure: always

automatic_scaling:
  min_instances: 0
  max_instances: 10
  target_cpu_utilization: 0.6
